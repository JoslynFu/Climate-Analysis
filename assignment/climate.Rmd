---
title: "Climate Exercise"
author: "Joslyn Fu & Kelly Yuan"
output: github_document
---


This is a climate change excerise by Joslyn and Jiaming to dive into how the main indicators of climate change, including C02 trends, global temperature change. .
# C02 Trends

First, we exmaine the CO2 trends. 
This is from the [NASA Climate Change Section ](http://climate.nasa.gov/vital-signs/carbon-dioxide/), and the original data is obtained from the National Oceanic and Atmospheric Administration, specifically the Earth System Research Laboratories.

The Data is shown below:

```{r message=FALSE}
library(tidyverse)
```

```{r message=FALSE}

co2 <- 
read_table("https://raw.githubusercontent.com/espm-157/climate-template/master/assignment/co2_mm_mlo.txt", 
                  comment="#",
                  col_names = c("year", "month", "decimal_date", "average",
                                "interpolated", "trend", "days"),
                  na = c("-1", "-99.99"))
co2
```

We then visualize the data.

```{r}
ggplot(co2, aes(x = decimal_date, y = average)) + geom_line() 
```

According to the dataset, C02 level usually reaches its annual maximum around May and June, and its minimum around September and Octobor. Based on our research, much of this variation happens because of the role of plants in the carbon cycle. Plants extract CO2 from the atmosphere, along with sunlight and water, to make food and other substances that they need to grow —— this is the process of _photosysthesis_.  Therefore, CO2 in the atmosphere decreases during the growing season and increases during the rest of the year, which leads to maximum buildup in May before photosynthesis begins to take over in the summer time. Photosynthesis, in which plants take up CO2 from the atmosphere and release oxygen, dominates during the growing season (the warmer part of the year). Respiration, by which plants and animals take up oxygen and release CO2, occurs all the time but dominates during the colder months of the year.

What rolling average is used in computing the "trend" line?  How does the trend depend on the rolling average?

------------------------

# Global Temperatre 

After examining CO2 trend, we look into the global temperature data from [NASA Global Climate Change Section](http://climate.nasa.gov/vital-signs/global-temperature).


## Question 1:

Describe the data set to the best of your ability given the documentation provided.  Describe what kind of column each data contains and what units it is measured in.  Then address our three key questions in understanding this data:

- How are the measurements made? What is the associated measurement uncertainty?
- What is the resolution of the data?
- Are their missing values? How should they be handled?

The temperature dataset contains information about gobal annual mean temperature from 1880 to 2019 relative to 1951-1980 average temperatures. This graph illustrates the change in global surface temperature relative to 1951-1980 average temperatures.


Please see the below dataset table.

```{r}
temperature <- read_table(
  "http://climate.nasa.gov/system/internal_resources/details/original/647_Global_Temperature_Data_File.txt",
  skip = 5,
  col_names = c("year","temp","lowess5"))

temperature
```

This is the trend in global mean temperatures over time.

Plot the trend in global mean temperatures over time.  Describe what you see in the plot and how you interpret the patterns you observe.
```{r}
temperature %>%
  ggplot(aes(x = year, y = temp)) + geom_line()
```

According to the graph, the overall trend in global temperature is increasing. Starting from 2012, the increase in global temperature is even 

## Question 4: Evaluating the evidence for a "Pause" in warming?

The [2013 IPCC Report](https://www.ipcc.ch/pdf/assessment-report/ar5/wg1/WG1AR5_SummaryVolume_FINAL.pdf) included a tentative observation of a "much smaller increasing trend" in global mean temperatures since 1998 than was observed previously.  This led to much discussion in the media about the existence of a "Pause" or "Hiatus" in global warming rates, as well as much research looking into where the extra heat could have gone.  (Examples discussing this question include articles in [The Guardian](http://www.theguardian.com/environment/2015/jun/04/global-warming-hasnt-paused-study-finds), [BBC News](http://www.bbc.com/news/science-environment-28870988), and [Wikipedia](https://en.wikipedia.org/wiki/Global_warming_hiatus)). 

By examining the data here, what evidence do you find or not find for such a pause?  Present an analysis of this data (using the tools & methods we have covered in Foundation course so far) to argue your case.  

What additional analyses or data sources would better help you refine your arguments?

## Question 5: Rolling averages
    
- What is the meaning of "5 year average" vs "annual average"?
- Construct 5 year averages from the annual data.  Construct 10 & 20-year averages. 
- Plot the different averages and describe what differences you see and why.  





# Exercise II: Melting Ice Sheets?

- Data description: <http://climate.nasa.gov/vital-signs/land-ice/>
- Raw data file: <http://climate.nasa.gov/system/internal_resources/details/original/499_GRN_ANT_mass_changes.csv>

## Question 1:

- Describe the data set: what are the columns and units? Where do the numbers come from? 
- What is the uncertainty in measurment? Resolution of the data? Interpretation of missing values?

There are three columns iin the table. 
i) 'Time' in units of 'year-day'
ii) 'greenland_mass' in units of 'Gt'
iii) 'antarctica_mass' in units of 'Gt'

The numbers are from Ice mass measurement by NASA's GRACE satellites.
The uncertainty depends on the accuracy of the satellites. The missing values indicate a gap between missions during that time.



## Question 2:

Construct the necessary R code to import this data set as a tidy `Table` object.
```{r}
ice <- read_csv("http://climate.nasa.gov/system/internal_resources/details/original/499_GRN_ANT_mass_changes.csv",skip = 10,
                col_names = c("time","greenland_mass","antarctica_mass"))
ice
```


## Question 3:

Plot the data and describe the trends you observe.
```{r}
ice %>%
  ggplot(aes(x = time)) + 
  geom_line(aes(y = greenland_mass), col="blue") +
  geom_line(aes(y = antarctica_mass), col = "green")
```

The trend is that both ice mass are decreasing and in each year, there is a wave-like shape, meaning a decrease in summer and an increase in winter. However, greenland_mass is decreasing at a faster rate than antarctica mass.


# Exercise III: Rising Sea Levels?

- Data description: <http://climate.nasa.gov/vital-signs/sea-level/>
- Raw data file: <http://climate.nasa.gov/system/internal_resources/details/original/121_Global_Sea_Level_Data_File.txt>


## Question 1:

- Describe the data set: what are the columns and units? 
- Where do these data come from? 
- What is the uncertainty in measurment? Resolution of the data? Interpretation of missing values?


## Question 2:

Construct the necessary R code to import this data set as a tidy `Table` object.
```{r}
sea_level <- read_table("http://climate.nasa.gov/system/internal_resources/details/original/121_Global_Sea_Level_Data_File.txt",
                        skip = 50,
                        col_names = c("altimeter_type","merged_file_cycle","number_of_observations","number_of_weighted_observations",
                                      "gmsl_variation_adjustment_not_applied","standard_deviation_of_gmsl_variation_no_adjustment",
                                      "gmsl_variation_adjustment_applied","standard_deviation_of_gmsl_adjustment",
                                      "smoothed_gmsl_variation","smoothed_gmsl_variation_removed_signal"))
sea_level
```


## Question 3:

Plot the data and describe the trends you observe.
```{r}
sea_level %>%
  ggplot(aes(x = number_of_observations)) +
  geom_line(aes(y = smoothed_gmsl_variation),col= "blue") +
  geom_line(aes(y = smoothed_gmsl_variation_removed_signal),col= "red")
```



# Exercise IV: Arctic Sea Ice?

- <http://nsidc.org/data/G02135>
- <ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/north/daily/data/N_seaice_extent_daily_v3.0.csv>


## Question 1:

- Describe the data set: what are the columns and units? 
- Where do these data come from? 
- What is the uncertainty in measurement? Resolution of the data? Interpretation of missing values?


## Question 2:

Construct the necessary R code to import this data set as a tidy `Table` object.

```{r}

```


```{r}
sea_ice <- read_csv("ftp://sidads.colorado.edu/DATASETS/NOAA/G02135/north/daily/data/N_seaice_extent_daily_v3.0.csv")
sea_ice.head()
```


## Question 3:

Plot the data and describe the trends you observe.    


# Exercise V: Longer term trends in CO2 Records


The data we analyzed in the unit introduction included CO2 records dating back only as far as the measurements at the Manua Loa observatory.  To put these values into geological perspective requires looking back much farther than humans have been monitoring atmosopheric CO2 levels.  To do this, we need another approach.


[Ice core data](http://cdiac.ornl.gov/trends/co2/ice_core_co2.html):

Vostok Core, back to 400,000 yrs before present day 

- Description of data set: <http://cdiac.esd.ornl.gov/trends/co2/vostok.html>
- Data source: <http://cdiac.ornl.gov/ftp/trends/co2/vostok.icecore.co2>

## Questions / Tasks:

- Describe the data set: what are the columns and units? Where do the numbers come from? 
- What is the uncertainty in measurment? Resolution of the data? Interpretation of missing values?
- Read in and prepare data for analysis.
- Reverse the ordering to create a chronological record.  
- Plot data
- Consider various smoothing windowed averages of the data. 
- Join this series to Mauna Loa data
- Plot joined data
- Describe your conclusions

```{r}
table <- read_csv(http://cdiac.ornl.gov/trends/co2/ice_core_co2.html)
table
```


